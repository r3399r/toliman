{"version":3,"sources":["pages/home/Home.module.scss","services/dropboxService.ts","services/googleService.ts","pages/home/Home.tsx","component/Textarea2MathJax.tsx"],"names":["module","exports","dropbox","uploadFile","commitedFile","undefined","Dropbox","accessToken","fetch","_fetch","filesUpload","contents","path","mode","aaa","a","doc","GoogleSpreadsheet","useServiceAccountAuth","client_email","private_key","loadInfo","sheet","sheetsById","setHeaderRow","addRow","Name","Value","Home","useState","countdown","setCountdown","id","setId","chapter","setChapter","question","setQuestion","isQueAreaDisable","setIsQueAreaDisable","answer","setAnswer","isAnsAreaDisable","setIsAnsAreaDisable","hasImage","setHasImage","image","setImage","useEffect","Date","now","Math","floor","random","toString","result","JSON","stringify","history","useHistory","className","style","content","type","placeholder","onChange","ev","obj","parse","target","value","rows","clearTimeout","newCountdown","setTimeout","disabled","aria-checked","onClick","htmlFor","files","length","Textarea2MathJax","text","img","src","URL","createObjectURL","alt","role","ans","allowBlock","reader","FileReader","onload","readAsArrayBuffer","href","rel","push","Provider","split","map","line","index","splited","Node","formula","val","cnt","inline"],"mappings":"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","file":"static/js/4.a16d90bf.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"Home_content__LhlBm\",\"img\":\"Home_img__TsGuR\",\"ans\":\"Home_ans__3gsR5\"};","import { Dropbox } from 'dropbox';\nimport _fetch from 'isomorphic-fetch';\n\nlet dropbox: Dropbox;\n\nconst initDropbox = () => {\n  dropbox = new Dropbox({\n    accessToken: 'oDm3_-3br4cAAAAAAAG4jAOBl0tgqzsLfNyQNjisoLRuwEpX5Fc40fPNKIAtFEYy',\n    fetch: _fetch,\n  });\n};\n\ntype CommitedFile = {\n  contents: Object;\n  path: string;\n};\n\nexport const uploadFile = (commitedFile: CommitedFile) => {\n  if (dropbox === undefined) initDropbox();\n\n  dropbox.filesUpload({\n    contents: commitedFile.contents,\n    path: commitedFile.path,\n    mode: { '.tag': 'overwrite' },\n  });\n};\n","import { GoogleSpreadsheet } from 'google-spreadsheet';\n\nexport const aaa = async () => {\n  const doc = new GoogleSpreadsheet('1k16_pqSRfqfW-vjtebml8WdQBshF7ova4t7YDhzZT7M');\n\n  await doc.useServiceAccountAuth({\n    client_email: 'line-bot@symbolic-math-265616.iam.gserviceaccount.com',\n    private_key:\n      '-----BEGIN PRIVATE KEY-----\\nMIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQC9B8C7qTJUqPUO\\n6XXaBgjpsydkNHhSuyEDuvnvABK0tlH3vMwVBcc2eAJzOQD3CxrWd9ydmgdcBvUj\\nbwSAEaXPboZiGhamNtnXkPc4q2eZnunu4qwrDaJptyGYvUKROUwbKb69koR/qVec\\nKk9ePN5bnK4czYe9uMiX0NIsWDdPmPMGS060l+ez3MPOCRnItWbQgsyI7Bb7ELEq\\nDYDl3efuQsENEd4QhRd+35ZWhNkCJXscy1AVapT+k3NyJXrbczXN1A289HV9sydI\\njEJq/AZ4GBYXfZ29VbdFQYyZ3sEyLOuxEfgGUjPquhAvAtlu4lQXLEdHgymZM+eC\\nk8IwP3y7AgMBAAECggEAFwKdlyUb0lXALEYw/rmOANy6Znvt9awqcv4iCdI0H2QI\\n4E5OzXRRnAjJy5Ax1OC42J3om2qyNfqcK+m0s4jyan4QGlsF93UP2X91CKSczNod\\nAeOn2j8jo8NoxziqpMDudGla0FAd6ZMJ7iGcXbgCcpvE+g6Zf80W5fFuftASPjxa\\n7iYR/rPH53Me0b2YOq/WKsdSFb1eNjSaR5O/sPFAzmLfCM+sRqnJxc3LGf4LQB1q\\nMkkvA+u+SRZSnxqMh2Z2c6FB6WR2ZV0MGqyjIHubjRqcxktzcz5AAiHwGGBjeJGC\\nzkxOR3jsJ+E+sHndAszyBuUk8KnT3+KsTwEvIX2FoQKBgQD/eoglhbg5Hxz1w6w7\\ngp/6NYZ43pN5L+OHCeIH58bGDpRtUu6rObJdQEUh8KoPmdozzJWEDdIHZMcfBTj1\\niLzwJ6hybieumqlqlaFyxBXpZW0xP5omjqQCx4wwy4G4Kpd67jly0yYIoHGNvk5v\\nldemwqKl4hDRgT6aOb9UHo1ycQKBgQC9aoG/Owg+wIz82lqqbepaoE68vEfIFzlX\\n0MIEhGtM+I+M44rd1XD1PQCI4L4MTyALPZNGZQQ1AcJ0nnm3T0Hd01yfRtngUW7x\\nfsTuL8p2QlYz5MVHBpeATRVwLwBwuSATrOSWv9NNt8rJIcHgHpIO0BO3m8KoZBQa\\nBsCSpqff6wKBgQCA5ifPFrquR15rOYCqvetNaLgiP9qUaG8Z8QiUCIMn5q9IwXEd\\n/wxZNFYtG6oSGQQY4n4FlJuFk3lL02y7pXP+j2PT6HQpCmu0FS7SItETY1NGZ9q0\\n3X8uz9ORwvv+Ga84HP3rS1GDRMBGTeBxOF8ICmfZ3keyDM2zLrO0E342YQKBgE0s\\nrfyKQsu+jDMhjDtQWWHfWvVPCTgfLj/3UHWitk1AIMzYkOXdZw6kcilS2FwPiRDL\\nX8wYsGQgeWgmgZUMd9u3mE9VAMSCqV8/tWEOm8EfOhweo7pSlzuxLIDuxZEn/EfH\\n88LwGVna/oaAeIumKQBcCwyOK/uL+xy3j5Kw0ElNAoGBALagmZF/04oHfDnEg2bT\\nGVfgTBQLoKk0mhN7QQjabfYj9Q7M3856/jHSuxW4l7FkQTma2CtNz7HMohdojniC\\nCoVJ1VV84/SdLC+lefpnjZYLNnAXWTEa3IEEaL7RJpGgIzewQAwOHTyH8iVXbA0l\\nSNY4JM1ib43Waswh49yoACTY\\n-----END PRIVATE KEY-----\\n',\n  });\n\n  await doc.loadInfo();\n  const sheet = doc.sheetsById['1496271896'];\n\n  await sheet.setHeaderRow(['Name', 'Value']);\n  await sheet.addRow({ Name: 'new name', Value: 'new value' });\n};\n","import { GoogleSpreadsheet } from 'google-spreadsheet';\nimport { useEffect, useState } from 'react';\nimport { CopyToClipboard } from 'react-copy-to-clipboard';\nimport { useHistory } from 'react-router-dom';\nimport Textarea2MathJax from 'src/component/Textarea2MathJax';\nimport { uploadFile } from 'src/services/dropboxService';\nimport { aaa } from 'src/services/googleService';\nimport style from './Home.module.scss';\n\nconst Home = () => {\n  const [countdown, setCountdown] = useState<NodeJS.Timeout>();\n  const [id, setId] = useState<string>();\n\n  const [chapter, setChapter] = useState<string>('');\n\n  const [question, setQuestion] = useState<string>('');\n  const [isQueAreaDisable, setIsQueAreaDisable] = useState<boolean>(false);\n\n  const [answer, setAnswer] = useState<string>('');\n  const [isAnsAreaDisable, setIsAnsAreaDisable] = useState<boolean>(false);\n\n  const [hasImage, setHasImage] = useState<boolean>(false);\n  const [image, setImage] = useState<File>();\n\n  useEffect(() => {\n    setId((Date.now() * 1000 + Math.floor(Math.random() * 1000)).toString(16));\n  }, []);\n\n  const handleEdit = (ev: { target: HTMLInputElement }) => {\n    const obj = JSON.parse(ev.target.value);\n\n    setId(obj.id);\n    setChapter(obj.chapter);\n    setQuestion(obj.question);\n    setAnswer(obj.answer);\n  };\n\n  const handleChapterInput = (ev: { target: HTMLInputElement }) => {\n    setChapter(ev.target.value);\n  };\n\n  const handleQuestionEvent = (ev: { target: HTMLTextAreaElement }) => {\n    setIsAnsAreaDisable(true);\n    if (countdown) clearTimeout(countdown);\n    const newCountdown = setTimeout(() => {\n      setQuestion(ev.target.value);\n      setIsAnsAreaDisable(false);\n    }, 600);\n    setCountdown(newCountdown);\n  };\n\n  const handleAnswerEvent = (ev: { target: HTMLTextAreaElement }) => {\n    setIsQueAreaDisable(true);\n    if (countdown) clearTimeout(countdown);\n    const newCountdown = setTimeout(() => {\n      setAnswer(ev.target.value);\n      setIsQueAreaDisable(false);\n    }, 600);\n    setCountdown(newCountdown);\n  };\n\n  const onCheckboxClick = () => setHasImage(!hasImage);\n\n  const displayImage = (ev: { target: HTMLInputElement }) => {\n    if (ev.target.files === null || ev.target.files.length === 0) return;\n    setImage(ev.target.files[0]);\n  };\n\n  const uploadImage = () => {\n    if (image === undefined) return;\n\n    const reader = new FileReader();\n    reader.onload = () => {\n      if (reader.result === null) return;\n      uploadFile({ contents: reader.result, path: `/toliman/${id}.jpg` });\n    };\n    reader.readAsArrayBuffer(image);\n  };\n\n  const handleTest = () => {\n    aaa();\n  };\n\n  const result: string = JSON.stringify({ id, chapter, question, answer, hasImage });\n\n  const history = useHistory();\n  const testRouter = () => {\n    history.push('/toliman/hw');\n  };\n\n  return (\n    <div className={style.content}>\n      <div>編輯</div>\n      <input className=\"uk-input\" type=\"text\" placeholder=\"貼入字串\" onChange={handleEdit} />\n      <div>ID: {id}</div>\n      <div>章節</div>\n      <input\n        className=\"uk-input\"\n        type=\"text\"\n        placeholder=\"輸入章節\"\n        onChange={handleChapterInput}\n        value={chapter}\n      />\n      <div>題目</div>\n      <textarea\n        className=\"uk-textarea\"\n        rows={4}\n        placeholder=\"輸入題目\"\n        onChange={handleQuestionEvent}\n        disabled={isQueAreaDisable}\n      />\n      <div>答案</div>\n      <textarea\n        className=\"uk-textarea\"\n        rows={2}\n        placeholder=\"輸入答案\"\n        onChange={handleAnswerEvent}\n        disabled={isAnsAreaDisable}\n      />\n      <div>\n        <input\n          id=\"hasImage\"\n          aria-checked=\"false\"\n          className=\"uk-checkbox\"\n          type=\"checkbox\"\n          onClick={onCheckboxClick}\n        />\n        <label htmlFor=\"hasImage\">&nbsp;是否有圖</label>\n      </div>\n      {hasImage && (\n        <div>\n          <input type=\"file\" onChange={displayImage} />\n        </div>\n      )}\n      <hr />\n      {question && <Textarea2MathJax text={question} />}\n      {hasImage && image && (\n        <img className={style.img} src={URL.createObjectURL(image)} alt=\"\" role=\"presentation\" />\n      )}\n      {answer && (\n        <Textarea2MathJax className={style.ans} text={'Ans: ' + answer} allowBlock={false} />\n      )}\n      <hr />\n      <div>{result}</div>\n      <div>\n        <CopyToClipboard text={result}>\n          <button className=\"uk-button uk-button-primary\">複製文字</button>\n        </CopyToClipboard>\n      </div>\n      {hasImage && (\n        <div>\n          <button className=\"uk-button uk-button-secondary\" onClick={uploadImage}>\n            上傳圖片\n          </button>\n          <a\n            href=\"https://www.dropbox.com/sh/ufg8rb6uzaegerb/AAD7SHNiitpiQgetY6X3_5aLa?dl=0\"\n            target=\"_blank\"\n            rel=\"noreferrer\"\n          >\n            請點此確認上傳成功\n          </a>\n        </div>\n      )}\n      <div>\n        <button className=\"uk-button uk-button-secondary\" onClick={handleTest}>\n          測試\n        </button>\n      </div>\n      <div>\n        <button className=\"uk-button uk-button-secondary\" onClick={testRouter}>\n          跳轉\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default Home;\n","import MathJax from 'react-mathjax';\n\ntype Props = {\n  text: string;\n  allowBlock?: boolean;\n  className?: string;\n};\n\nconst Textarea2MathJax = ({ className, text, allowBlock = true }: Props) => {\n  return (\n    <div className={className}>\n      <MathJax.Provider>\n        {text.split('\\n').map((line: string, index: number) => {\n          const splited: string[] = line.split('$$');\n\n          if (allowBlock === true && splited.length === 3 && splited[0] === '' && splited[2] === '')\n            return <MathJax.Node formula={splited[1]} key={index} />;\n\n          return (\n            <div key={index}>\n              {splited.map((val: string, cnt: number) => {\n                if (cnt % 2 === 0) return val;\n\n                return <MathJax.Node inline={true} formula={val} key={cnt} />;\n              })}\n            </div>\n          );\n        })}\n      </MathJax.Provider>\n    </div>\n  );\n};\n\nexport default Textarea2MathJax;\n"],"sourceRoot":""}