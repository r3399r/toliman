{"version":3,"sources":["pages/edit/Edit.module.scss","pages/edit/Edit.tsx","component/Textarea2MathJax.tsx","model/bank.ts","services/questionService.ts"],"names":["module","exports","Home","useState","countdown","setCountdown","isRendering","setIsRendering","id","setId","chapter","setChapter","question","setQuestion","answer","setAnswer","hasImage","setHasImage","image","setImage","useEffect","Date","now","toString","clearTimeout","newCountdown","setTimeout","result","className","style","content","placeholder","onChange","ev","inputId","target","value","res","getQuestion","undefined","alert","Group","options","chapterList","val","map","v","String","TextArea","rows","onClick","beforeUpload","file","URL","createObjectURL","maxCount","preview","src","alt","role","text","ans","allowBlock","JSON","stringify","Textarea2MathJax","Provider","split","line","index","splited","length","Node","formula","cnt","inline","bank","questionsByKey","getAllQuestions","lodash","keyBy","getQuestions","ids","allQuestions"],"mappings":"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","file":"static/js/10.48e6744b.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"Edit_content__1fCKD\",\"q\":\"Edit_q__jwYtu\",\"ans\":\"Edit_ans__27WM8\",\"preview\":\"Edit_preview__Sxhvb\",\"image\":\"Edit_image__1pbXs\"};","import { Button, Checkbox, Input, Upload } from 'antd';\nimport { CheckboxValueType } from 'antd/lib/checkbox/Group';\nimport { useEffect, useState } from 'react';\nimport { CopyToClipboard } from 'react-copy-to-clipboard';\nimport Textarea2MathJax from 'src/component/Textarea2MathJax';\nimport { chapterList, Question } from 'src/model/bank';\nimport { getQuestion } from 'src/services/questionService';\nimport style from './Edit.module.scss';\n\nconst Home = () => {\n  const [countdown, setCountdown] = useState<NodeJS.Timeout>();\n  const [isRendering, setIsRendering] = useState<boolean>(false);\n\n  const [id, setId] = useState<string>('');\n\n  const [chapter, setChapter] = useState<string[]>([]);\n\n  const [question, setQuestion] = useState<string>('');\n  const [answer, setAnswer] = useState<string>('');\n\n  const [hasImage, setHasImage] = useState<boolean>(false);\n  const [image, setImage] = useState<string>('');\n\n  useEffect(() => {\n    setId(Date.now().toString(16));\n  }, [question, answer]);\n\n  useEffect(() => {\n    setIsRendering(true);\n    if (countdown) clearTimeout(countdown);\n    const newCountdown = setTimeout(() => {\n      setIsRendering(false);\n    }, 600);\n    setCountdown(newCountdown);\n  }, [question, answer]);\n\n  const handleEdit = (ev: { target: HTMLInputElement }) => {\n    const inputId: string = ev.target.value;\n    const res: Question | undefined = getQuestion(inputId);\n\n    if (res === undefined) alert(`id: ${inputId} 不存在`);\n    else {\n      setId(inputId);\n      setChapter(res.chapter);\n      setQuestion(res.question);\n      setAnswer(res.answer);\n      setHasImage(res.hasImage);\n      if (res.hasImage) setImage(`images/${inputId}.jpg`);\n    }\n  };\n\n  const handleCheckbox = (val: CheckboxValueType[]) => {\n    setChapter(val.map((v: CheckboxValueType) => String(v)));\n  };\n\n  const handleQuestionEvent = (ev: { target: HTMLTextAreaElement }) => {\n    setQuestion(ev.target.value);\n  };\n\n  const handleAnswerEvent = (ev: { target: HTMLTextAreaElement }) => {\n    setAnswer(ev.target.value);\n  };\n\n  const onCheckboxClick = () => {\n    if (!hasImage === false) setImage('');\n    setHasImage(!hasImage);\n  };\n\n  const displayImage = (file: File) => {\n    setImage(URL.createObjectURL(file));\n\n    return false;\n  };\n\n  const result: Question = { id, chapter, question, answer, hasImage };\n\n  return (\n    <div className={style.content}>\n      <div>修改</div>\n      <Input placeholder=\"貼上JSON\" onChange={handleEdit} />\n      <div>章節</div>\n      <Checkbox.Group options={chapterList} onChange={handleCheckbox} />\n      <div>題目</div>\n      <Input.TextArea\n        rows={4}\n        placeholder=\"輸入題目\"\n        onChange={handleQuestionEvent}\n        value={question}\n      />\n      <div>答案</div>\n      <Input.TextArea rows={2} placeholder=\"輸入答案\" onChange={handleAnswerEvent} value={answer} />\n      <div>\n        <Checkbox id=\"hasImage\" onClick={onCheckboxClick}>\n          是否有圖\n        </Checkbox>\n      </div>\n      {hasImage && (\n        <Upload beforeUpload={displayImage} maxCount={1}>\n          <Button>選擇檔案</Button>\n        </Upload>\n      )}\n      <hr />\n      <div className={style.preview}>\n        {isRendering === true && <div>產生中...</div>}\n        {image !== '' && <img className={style.image} src={image} alt=\"\" role=\"presentation\" />}\n        {isRendering === false && question && <Textarea2MathJax text={question} />}\n        {isRendering === false && answer && (\n          <Textarea2MathJax className={style.ans} text={'Ans: ' + answer} allowBlock={false} />\n        )}\n      </div>\n      <hr />\n      <div>{JSON.stringify(result)}</div>\n      <div>\n        <CopyToClipboard text={JSON.stringify(result)}>\n          <Button>複製文字</Button>\n        </CopyToClipboard>\n      </div>\n    </div>\n  );\n};\n\nexport default Home;\n","import MathJax from 'react-mathjax';\n\ntype Props = {\n  text: string;\n  allowBlock?: boolean;\n  className?: string;\n};\n\nconst Textarea2MathJax = ({ className, text, allowBlock = true }: Props) => (\n  <MathJax.Provider>\n    {text.split('\\n').map((line: string, index: number) => {\n      const splited: string[] = line.split('$$');\n\n      if (allowBlock === true && splited.length === 3 && splited[0] === '' && splited[2] === '')\n        return <MathJax.Node formula={splited[1]} key={index} />;\n\n      return (\n        <div key={index} className={className}>\n          {splited.map((val: string, cnt: number) => {\n            if (cnt % 2 === 0) return val;\n\n            return <MathJax.Node inline={true} formula={val} key={cnt} />;\n          })}\n        </div>\n      );\n    })}\n  </MathJax.Provider>\n);\n\nexport default Textarea2MathJax;\n","export type Question = {\n  id: string;\n  chapter: string[];\n  question: string;\n  answer: string;\n  hasImage: boolean;\n};\n\nexport const chapterList: string[] = [\n  '數與式',\n  '指數對數',\n  '多項式函數',\n  '直線與圓',\n  '三角比',\n  '數列級數',\n  '數據分析',\n  '排列組合與機率',\n  '三角函數A',\n  '三角函數B',\n  '指數與對數函數',\n  '平面向量',\n  '空間概念',\n  '空間向量',\n  '空間中的平面與直線',\n  '條件機率',\n  '矩陣A',\n  '矩陣B',\n];\n\nexport const bank: Question[] = [\n  {\n    id: '178f776e6fd',\n    chapter: ['排列組合與機率'],\n    question:\n      '學生 $$7$$ 人(甲、乙、丙、丁、戊、己、庚)參加接力賽跑，請回答下列問題各有多少種次序。\\n(1)任意排棒有幾種？\\n(2)甲、乙、丙必須是相鄰的三棒有幾種？\\n(3)甲、乙、丙三人的棒次互不相連有幾種？',\n    answer: '(1) $$5040$$ (2) $$720$$ (3) $$1440$$',\n    hasImage: false,\n  },\n  {\n    id: '178f777ce0b',\n    chapter: ['排列組合與機率'],\n    question:\n      '一列火車有七節車廂，車廂號碼 $$1$$、$$2$$、$$3$$、$$4$$、$$5$$、$$6$$、$$7$$，今有兩對夫婦同時搭上火車。此四人剛好選坐兩節不同車廂而且是一對夫婦在一節車廂，另外一對夫婦選坐另一節車廂，則共有幾種選法？',\n    answer: '$$42$$',\n    hasImage: false,\n  },\n  {\n    id: '178f7791d87',\n    chapter: ['排列組合與機率'],\n    question:\n      '以 $$1$$、$$2$$、$$4$$、$$6$$、$$9$$ 等五個數不可重複排成一個五位數，將這些五位數由小排到大(如 $$12469$$、$$12496$$、...)後，則第 $$50$$ 個數為？',\n    answer: '$$41296$$',\n    hasImage: false,\n  },\n  {\n    id: '178f779646a',\n    chapter: ['排列組合與機率'],\n    question:\n      '用 $$0$$、$$0$$、$$1$$、$$1$$、$$1$$、$$2$$ 共 $$6$$ 個數字作成六位數，則共有幾種不同的數字？',\n    answer: '$$40$$',\n    hasImage: false,\n  },\n  {\n    id: '178f779de67',\n    chapter: ['排列組合與機率'],\n    question: '某中學晚會共分成 $$7$$ 段，其中魔術、歌唱須在熱舞表演的前面，則共有幾種排法？',\n    answer: '$$1680$$',\n    hasImage: false,\n  },\n  {\n    id: '178f77a38e2',\n    chapter: ['排列組合與機率'],\n    question: '將 $$abscissa$$ 八個字排成一列，任意排，則排法有多少種？',\n    answer: '$$3360$$',\n    hasImage: false,\n  },\n  {\n    id: '178f77a66b0',\n    chapter: ['排列組合與機率'],\n    question: '由一樓上二樓的樓梯共有 $$8$$ 階，某人以每步踏一階或二階上樓，共有幾種走法？',\n    answer: '$$34$$',\n    hasImage: false,\n  },\n  {\n    id: '178f77a9938',\n    chapter: ['排列組合與機率'],\n    question:\n      '從 $$1$$、$$2$$、$$3$$、$$4$$、$$5$$、$$6$$ 這 $$6$$ 個數字中，任意挑選 $$3$$ 個相異的數字排成三位數，若將所有排成的三位數由小到大依序排列，則 $$345$$ 為第幾個三位數？',\n    answer: '$$51$$',\n    hasImage: false,\n  },\n  {\n    id: '178f77ac93d',\n    chapter: ['排列組合與機率'],\n    question:\n      '某班想從 $$7$$ 名學生中選派 $$4$$ 人分別參加演講、郎讀、作文、字音字形比賽，其中小宇不參加演講比賽，阿光不參加朗讀比賽，則有幾種選派方式？',\n    answer: '$$620$$',\n    hasImage: false,\n  },\n  {\n    id: '178f77b0f54',\n    chapter: ['排列組合與機率'],\n    question:\n      '甲、乙、丙、丁、戊、己六人排成一列，其中甲與乙為相鄰而且丙與乙分開，則可能的情形有幾種？',\n    answer: '$$192$$',\n    hasImage: false,\n  },\n  {\n    id: '178f77b3896',\n    chapter: ['排列組合與機率'],\n    question:\n      '由甲地至乙地是棋盤式的街道，某人以走捷徑的方式由甲地至乙地，求必須經過 $$P$$ 點或 $$Q$$ 點的方法有多少種？',\n    answer: '$$154$$',\n    hasImage: true,\n  },\n  {\n    id: '178f77b6e66',\n    chapter: ['排列組合與機率'],\n    question:\n      '將 $$1$$、$$2$$、$$3$$、$$4$$、$$5$$、$$6$$ 六個數字全取排成六位數，下列敘述何者正確？\\n(A)六位數共有 $$720$$ 個\\n(B)偶數有 $$360$$ 個\\n(C) $$3$$ 的倍數有 $$240$$ 個\\n(D) $$4$$ 的倍數有 $$192$$ 個\\n(E) $$5$$ 的倍數有 $$190$$ 個',\n    answer: '(A)(B)(D)(E)',\n    hasImage: false,\n  },\n];\n","import lodash from 'lodash';\nimport { bank, Question } from 'src/model/bank';\n\nlet questionsByKey: { [key: string]: Question };\n\nexport const getAllQuestions = (): { [key: string]: Question } => {\n  if (questionsByKey === undefined) questionsByKey = lodash.keyBy(bank, 'id');\n\n  return questionsByKey;\n};\n\nexport const getQuestion = (id: string): Question | undefined => {\n  const allQuestions = getAllQuestions();\n\n  return allQuestions[id];\n};\n\nexport const getQuestions = (ids: string[]): Question[] => {\n  const allQuestions = getAllQuestions();\n\n  return ids.map((id: string) => allQuestions[id]);\n};\n"],"sourceRoot":""}